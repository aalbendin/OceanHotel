{% extends "HotelBundle:Default:index.html.twig" %}

{% block title %}Comanda{% endblock %}

	{% block page_content %} 

		<div id="contingut">

			<div class="container">

				<div class="row">

					<div class="col-lg-12">

						<h1 class="text-center">Comanda</h1>

						{% for flashMessage in app.session.flashbag.get('notice') %}

							<div class="alert alert-{{ flashMessage.type }}">
								<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								<h4 class="text-center">{{ flashMessage.msg }}</h4>
							</div>
						{% endfor %}	

							<div class="table-responsive" >

								<table id="table_id" class="table table-striped table-bordered">

									<thead>

										<tr>


											<th>Num. Habitació</th>

											<th>Places</th>

											<th>Preu</th>		

											<th>Modalitat</th>									

											<th>Eliminar habitació</th>

										</tr>

									</thead>

									<tfoot>

										<tr>


											<th>Num. Habitació</th>

											<th>Places</th>

											<th>Preu</th>		

											<th>Modalitat</th>										

											<th>Eliminar habitació</th>

										</tr>

									</tfoot>

									<tbody>
									{% if arrayLinea != null %}
										{% for reserva in arrayLinea %}

										<tr>


											<td>{{reserva.habitacio.getNumHabitacio()}}</td>

										
											<td>{{reserva.habitacio.getPlaces()}}</td>


											<td>{{reserva.habitacio.getPreu()}}</td>											

											<td>{{reserva.modalitat.getDescripcio()}}</td>

											<td>

												<center>
												
												<a  href="{{path('hotel_bundle_reserva_eliminarLineaComanda', { 'id': reserva.habitacio.getId() }) }}"class="btn btn-xs btn-danger"><span class="fa fa-trash"></span></a>

												</center>

											</td>

										</tr>										
										{% endfor %}
									{% else %}
										<td colspan="6" class="text-center" style="font-size:17px;">No hi ha cap habitació en la llista</td>
									{% endif %}									

									</tbody>

								</table>

							</div>	

							{% set clientV = false %}
							

							{% if client != null %}

									{% if client.getNom() != null %}
										{% set clientV = true %}
									{% else %}
										{% set clientV = false %}
									{% endif %}
							
							{% else %}
								{% set clientV = false %}
							{% endif %}



							

							<div class="col-md-6" style="margin-bottom:15px;">

							<div class="panel panel-default">

								<div class="panel-heading"><h4 class="text-center">Dades de Client</h4></div>

								<div class="panel-body">

								{% if clientV %}

									
										<div class="col-sm-8">
										<p><strong>Nom:</strong> {{client.getNom()}}</p>

										<p><strong>Cognoms:</strong> {{client.getCognoms()}}</p>

										<p><strong>Data de naixement:</strong> {{client.getDataNaixament() |date('d/m/Y')}}</p>

										<p><strong>NIF:</strong> {{client.getNif()}}</p>
										</div>
										<div class="col-sm-2">
										<a class="btn btn-warning" href="{{path('hotel_bundle_reserva_completarCliente' )}}">Modificar dades</a>
										</div>
									

									

								{% else %}

									<div class="col-sm-8">
										<p>No hi han dades de client.</p>
										</div>
										<div class="col-sm-2">
										<a class="btn btn-warning" href="{{path('fos_user_security_login' )}}">Iniciar Sessió</a>
										</div>

								{% endif %}

								</div>

							</div>

							</div>


							<div class="col-md-6" style="margin-bottom: 10%; ">	

							<div class="col-md-12 text-center" style="margin-bottom: 10%; margin-top:2%;">
					
							<p><strong>Total Habitacions:</strong> {{totalHabitacio|number_format(2, '.', ',')}}€</p>
							<p><strong>Total Modalitats:</strong> {{totalModalitat|number_format(2, '.', ',')}}€</p>
							<h3><strong>Total: </strong> {{total|number_format(2, '.', ',')}}€</h3>
							</div>

							<div class="col-xs-6 text-center">

							<a href="{{path('hotel_bundle_reserva_llistaHabitacionsFrontend' )}}" class="btn btn-warning btn-afegir">Continuar compra</a>			
							</div>

							<div class="col-xs-6 text-center">

							{% if clientV %}
							<a href="{{path('hotel_bundle_reserva_acabarReserva' )}}" class="btn btn-warning btn-afegir">Finalitzar</a>	
								
							{% else %}
							<a href="" class="btn btn-warning btn-afegir" disabled>Finalitzar</a>	
							{% endif %}
							</div>
							</div>						

						</div>

					</div>

				</div>

			</div>	

	{% endblock %}	